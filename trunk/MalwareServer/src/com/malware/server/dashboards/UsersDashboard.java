package com.malware.server.dashboards;

import java.util.List;

import javax.jdo.PersistenceManager;

import com.google.gson.Gson;
import com.malware.common.dto.User;
import com.malware.server.PMF;

/**
 * Dashboard to show information about the users in the store.
 */
public class UsersDashboard {
	
	public static String getHtml() {
		String output = "<br/>";
		
		PersistenceManager pm = PMF.get().getPersistenceManager();
		String query = "select from " + User.class.getName();
		List<User> users = (List<User>) pm.newQuery(query).execute();
		if (users.isEmpty()) {
			output = "No objects in store.";
			return output;
		} else {
			output = "Count of objects in store: " + users.size();
			output += "<br/><br/>";
		}
		
		for (User user : users) {
			output += MainDashboardServlet.gsonPrettyPrinter.toJson(user);
			output += "<br/>";
		}
		
		return output;
	}

}

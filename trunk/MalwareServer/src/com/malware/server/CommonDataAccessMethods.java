package com.malware.server;

import javax.jdo.JDOObjectNotFoundException;
import javax.jdo.PersistenceManager;

import com.malware.common.dto.User;

/**
 * Bunch of database access methods which are generally useful.
 */
public class CommonDataAccessMethods {
	
	public static User getUser(String email) {
		PersistenceManager pm = PMF.get().getPersistenceManager();
		
		User user = null;
		try {
			user = pm.getObjectById(User.class, email);
		} catch (JDOObjectNotFoundException e) {
			return null;
		}
		
		pm.close();
		
		return user;
	}
	
	public static boolean doesEmailExist(String email) {
		return getUser(email) != null;
	}
	
	public static void storeUser(User user) {
		PersistenceManager pm = PMF.get().getPersistenceManager();
		
		pm.makePersistent(user);
		
		pm.close();
	}
}

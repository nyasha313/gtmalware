package com.malware.server;

import java.util.List;

import javax.jdo.PersistenceManager;

import com.malware.common.dto.Trip;

/**
 * Performs the route calculation.
 */
public class RouteCalculator {

	@SuppressWarnings("unchecked")
	public static List<Trip> getBestTripsForARider(Trip riderTrip) {
		PersistenceManager pm = PMF.get().getPersistenceManager();

		// TODO(kaushikr): Make a query with searchKeyword.
		String query = "select from " + Trip.class.getName();
		
		Geohash geohash = new Geohash();
		String geoPoints = geohash.encode( riderTrip.getSourceLat(),riderTrip.getSourceLng() );
		List<Trip> trips = (List<Trip>) pm.newQuery(query).execute();
		//trips = pm.getObjectById(Trip.class);
		
		return trips;
	}
	
	@SuppressWarnings("unchecked")
	public static List<Trip> getBestTripsForADriver(Trip driverTrip) {
		PersistenceManager pm = PMF.get().getPersistenceManager();

		// TODO(kaushikr): Make a query with searchKeyword.
		String query = "select from " + Trip.class.getName();
		List<Trip> trips = (List<Trip>) pm.newQuery(query).execute();

		return trips;	
	}
}

package com.malware.server.dashboards;

import java.io.IOException;

import javax.servlet.http.HttpServlet;
import javax.servlet.http.HttpServletRequest;
import javax.servlet.http.HttpServletResponse;

import com.google.gson.Gson;
import com.google.gson.GsonBuilder;
import com.malware.common.constants.Constants;

@SuppressWarnings("serial")
public class MainDashboardServlet extends HttpServlet {
	
	public static Gson gsonPrettyPrinter = new GsonBuilder().setPrettyPrinting().create();
	public static Gson gson = new Gson();
	
	public void doGet(HttpServletRequest req, HttpServletResponse resp) throws IOException {
		resp.setContentType("text/html");
		
		resp.getWriter().println("You have reached the main dashboard for " + Constants.PROJECT_NAME + ".");
		resp.getWriter().println("<br/><br/>");
		
		resp.getWriter().println("What would you like to see?");
		resp.getWriter().println("<br/><br/>");
		
		resp.getWriter().println("<a href='?type=users'>Users</a>");
		resp.getWriter().println("<br/>");
		resp.getWriter().println("<a href='?type=trips'>Trips</a>");
		resp.getWriter().println("<br/>");
		
		resp.getWriter().println("<br/>");
		
		String dashboardType = req.getParameter("type");
		
		if (dashboardType == null) {
			// The user hasn't specified what information we need to display.
			return;
		}
		
		if (dashboardType.equals("users")) {
			resp.getWriter().println(UsersDashboard.getHtml());
		} else if (dashboardType.equals("trips")) {
			// No-op.
		}
	}	
}

package com.malware.server;

import java.util.ArrayList;
import java.util.List;

import com.malware.common.dto.ServerRequest;
import com.malware.common.dto.ServerResponse;
import com.malware.common.dto.Trip;
import com.malware.common.dto.ServerRequest.ServerMethod;
import com.malware.common.dto.ServerResponse.ResponseCode;

/**
 * This class stores information about a new user into the database.
 */
public class SearchRiderTripsMethod {

	public static ServerResponse execute(ServerRequest serverRequest) {
		assert serverRequest.getServerMethod() == ServerMethod.SEARCH_RIDER_TRIPS;
		
		String email = serverRequest.getUser().getEmail();
		
		// List<Trip> trips1 = CommonDataAccessMethods.searchRiderTrips(email);
		List<Trip> trips2 = CommonDataAccessMethods.searchRidersTrips(email);
//		List<Trip> resultTrips = new ArrayList<Trip>();
//		
//		for (int i = 0; i < trips1.size(); ++i) {
//			resultTrips.add(trips1.get(i));
//		}
//		
//		for (int i = 0; i < trips2.size(); ++i) {
//			if  (!trips2.get(i).isAssigned()) {
//				resultTrips.add(trips2.get(i));
//			}
//		}
		
		ServerResponse serverResponse = new ServerResponse();
		serverResponse.setResponseCode(ResponseCode.SUCCESS);
		
		serverResponse.setTrips(trips2);
		
		return serverResponse;
	}
}
